var wppizzaClickEvent="click",wppizzaShortcodeTotals=function(){};jQuery(document).ready(function(e){var a=function(){var a,t=e(".wppizza-cart-sticky"),i=!1;if("undefined"!=typeof wppizza.crt.lmtb&&e("#"+wppizza.crt.lmtb).length>0){i=e("#"+wppizza.crt.lmtb);var r=i.offset().top}var p=e(window).scrollTop()+wppizza.crt.mt,o=[],n=[],z=[],l=!1;wppizza.crt.anim>0&&""!=wppizza.crt.fx&&(l=!0),t.length>0&&e.each(t,function(a){o[a]=e(this),o[a].wrap("<div class='wppizza-cart-wrap'></div>"),n[a]=o[a].css(["backgroundColor"]),n[a]["offset-top"]=o[a].offset().top,n[a].state="",n[a]["height-int"]=o[a].height(),n[a]["width-int"]=o[a].width(),i&&r>n[a]["offset-top"]+n[a]["height-int"]&&(n[a]["limit-bottom"]=Math.floor(r-n[a]["height-int"])),z[a]=o[a].parent(),o[a].width(n[a]["width-int"]),z[a].height(n[a]["height-int"])});var c=function(e,a,t){var r=0;if(i){var p=t.offset().top,o=Math.floor(p-a-e["height-int"]);0>o&&(r=o)}return r};if(l||e(window).scroll(function(){var a=e(window).scrollTop()+wppizza.crt.mt;e.each(o,function(e){var t=c(n[e],a,i);n[e]["offset-top"]>=a&&o[e].removeClass("wppizza-cart-fixed").css({top:"","background-color":""+n[e].backgroundColor}),n[e]["offset-top"]<a&&o[e].addClass("wppizza-cart-fixed").css({top:""+(wppizza.crt.mt+t)+"px","background-color":""+wppizza.crt.bg})})}),l){var d=!0;setTimeout(function(){e.each(o,function(e){var a=c(n[e],p,i);n[e]["offset-top"]>=p&&(n[e].state="relative"),n[e]["offset-top"]<p&&(o[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg,top:"0"}),o[e].animate({top:""+(wppizza.crt.mt+a)+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}),n[e].state="fixed")}),d=!1},200),e(window).scroll(function(){if(!d){var t=e(window).scrollTop()+wppizza.crt.mt;clearTimeout(a),a=setTimeout(function(){e.each(o,function(e){var a=c(n[e],t,i);n[e]["offset-top"]>=t&&"relative"!=n[e].state&&(n[e].state="relative",o[e].removeClass("wppizza-cart-fixed"),o[e].animate({top:""},wppizza.crt.anim,""+wppizza.crt.fx,function(){o[e].css({"background-color":""+n[e].backgroundColor})})),n[e]["offset-top"]<t&&("fixed"!=n[e].state||i)&&(n[e].state="fixed",o[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg}),o[e].animate({top:""+(wppizza.crt.mt+a)+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}))})},100)}})}};if("undefined"!=typeof wppizza.ofqc){var t=e("#wppizza-send-order .wppizza-item-quantity");t.spinner({min:0}),t.on("DOMMouseScroll mousewheel",function(e){return e.originalEvent.detail>0||e.originalEvent.wheelDelta<0?parseInt(this.value)>0&&(this.value=parseInt(this.value,10)-1):this.value=parseInt(this.value,10)+1,!1}),t.keydown(function(a){return 13==a.which||35==a.which?(a.preventDefault(),e(".wppizza-update-order").trigger("click"),!1):void 0}),e(document).on("click",".wppizza-update-order",function(){var a=e(".wppizza-item-quantity"),t={};e.each(a,function(){var a=(e(this),e(this).attr("id").split("-")),i=e(this).val();t[a[2]]=i}),e("html").css({position:"relative"}),e("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-update-order",data:t}},function(){window.location.href=window.location.href},"json").error(function(a,t,i){e("body>#wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)})})}e(document).on("keyup",".wppizza-cart-incr",function(a){this.value=this.value.replace(/[^0-9]/g,""),(13==a.keyCode||35==a.keyCode)&&e(this).closest("li").find(".wppizza-cart-increment").trigger("click")});var r=function(e,a){if(e.length>0)for(i=0;i<e.length;i++){var t=new Function("term","return "+e[i]+"(term);");t(a)}};if(e(document).on("click",".wppizza-add-to-cart,.wppizza-remove-from-cart,.wppizza-cart-refresh,#wppizza-force-refresh,.wppizza-cart-increment,.wppizza-empty-cart-button",function(a){if(e(".wppizza-open").length>0){a.preventDefault(),a.stopPropagation(),"undefined"!=typeof wppizza.isCheckout?(e("html").css({position:"relative"}),e("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),e(".wppizza-ordernow").attr("disabled","true")):e(".wppizza-order").prepend('<div id="wppizza-loading"></div>');var t=e(this),i=t.attr("id"),p=e(".wppizza-cart-button input,.wppizza-cart-button>a,.wppizza-empty-cart-button");p.attr("disabled","true");var o=!1;"undefined"==typeof wppizza.itm||"undefined"==typeof wppizza.itm.fbatc||t.hasClass("wppizza-add-to-cart-btn")||(o=!0);var n=1,z="";if(t.hasClass("wppizza-add-to-cart")){type="add";var l=i.split("-"),c=t.closest("article").find("#wppizza-category-"+l[1]).val();"undefined"!=typeof c&&(z=c)}if(t.hasClass("wppizza-remove-from-cart")&&(type="remove"),t.hasClass("wppizza-empty-cart-button")&&(type="removeall",i=0),(t.hasClass("wppizza-cart-refresh")||"wppizza-force-refresh"==i)&&(type="refresh"),t.hasClass("wppizza-cart-increment")){var n=t.closest("li").find(".wppizza-cart-incr").val();type=0==n?"remove":"increment"}if("removeall"!=type&&"add"!=type&&t.fadeOut(100).fadeIn(400),o||"add"!=type||t.fadeOut(100).fadeIn(400),o&&"add"==type){var d=t.html();t.fadeOut(100,function(){t.html("<div class='wppizza-item-added-feedback'>"+wppizza.itm.fbatc+"</div>").fadeIn(400).delay(wppizza.itm.fbatcms).fadeOut(400,function(){t.html(d).fadeIn(100)})})}jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:type,id:i,itemCount:n,catId:z}},function(a){return"undefined"!=typeof wppizza.isCheckout?(window.location.href=window.location.href,void window.location.reload(!0)):(e(".wppizza-order").html(a.itemsajax),e(".wppizza-cart-button").html(a.button),e(".wppizza-cart-nocheckout").html(a.nocheckout),e(".wppizza-cart-total-items-label").html(a.order_value.total_price_items.lbl),e(".wppizza-cart-total-items-value").html(a.currency_left+""+a.order_value.total_price_items.val+a.currency_right),""==a.nocheckout&&(e(".wppizza-cart-discount-label").html(a.order_value.discount.lbl),e(".wppizza-cart-discount-value").html(""!=a.order_value.discount.val?'<span class="wppizza-minus"></span>'+a.currency_left+a.order_value.discount.val+a.currency_right:a.order_value.discount.val),e(".wppizza-cart-delivery-charges-label").html(a.order_value.delivery_charges.lbl),e(".wppizza-cart-delivery-charges-value").html(""!=a.order_value.delivery_charges.val?a.currency_left+""+a.order_value.delivery_charges.val+a.currency_right:a.order_value.delivery_charges.val),e(".wppizza-cart-tax-label").html(a.order_value.item_tax.lbl),e(".wppizza-cart-tax-value").html(a.currency_left+""+a.order_value.item_tax.val+a.currency_right),e(".wppizza-cart-tax-included-label").html(a.order_value.taxes_included.lbl),e(".wppizza-cart-tax-included-value").html(a.currency_left+""+a.order_value.taxes_included.val+a.currency_right),e(".wppizza-cart-total-label").html(a.order_value.total.lbl),e(".wppizza-cart-total-value").html(a.currency_left+""+a.order_value.total.val+a.currency_right)),(""!=a.nocheckout||0==a.items.length)&&(e(".wppizza-cart-discount-label").html(""),e(".wppizza-cart-discount-value").html(""),e(".wppizza-cart-delivery-charges-label").html(""),e(".wppizza-cart-delivery-charges-value").html(""),e(".wppizza-cart-total-label").html(""),e(".wppizza-cart-total-value").html(""),e(".wppizza-cart-tax-label").html(""),e(".wppizza-cart-tax-value").html(""),e(".wppizza-cart-tax-included-label").html(""),e(".wppizza-cart-tax-included-value").html("")),0==a.items.length&&(e(".wppizza-cart-total-items-label").html(""),e(".wppizza-cart-total-items-value").html("")),p.removeAttr("disabled"),void r(wppizza.funcCartRefr,a))},"json").error(function(a,t,i){alert("error : "+i),console.log(a.responseText),e(".wppizza-order #wppizza-loading").remove()})}}),e(document).on("click",".wppizza-add-to-cart",function(){0==e(".wppizza-open").length&&e(".wppizza-cart").length>0&&alert(wppizza.msg.closed)}),e(document).on("click","#wppizza-order-pickup-sel, #wppizza-order-pickup-js",function(){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0||e("#wppizza-send-order").length>0){var a=e(this);a.attr("disabled",!0);var t=a.is(":checked");if("wppizza-order-pickup-js"==a.attr("id"))if("undefined"!=typeof wppizza.opt&&"undefined"!=typeof wppizza.opt.pickupConfirm){if(!confirm(wppizza.msg.pickup))return t?a.attr("checked",!1):a.attr("checked",!0),void a.attr("disabled",!1)}else 1==t&&alert(wppizza.msg.pickup);jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"order-pickup",value:t,data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){var a="";"undefined"!=typeof e.anchor&&(a=e.anchor),window.location.href=e.location+a,window.location.reload(!0)},"json").error(function(e,a,t){alert("error : "+t),console.log(e.responseText)})}}),e("#wppizza_calc_handling").length>0){var p=e("input[name='wppizza-gateway']");0==p.length&&(p=e("select[name='wppizza-gateway']")),p.change(function(){if(e("#wppizza-send-order").prepend('<div id="wppizza-loading"></div>'),p.is(":radio"))var a=e("input[name='wppizza-gateway']:checked").val();else var a=e("select[name='wppizza-gateway']").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-select-gateway",data:e("#wppizza-send-order").serialize(),selgw:a}},function(){window.location.href=window.location.href},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)})})}e(document).on("click",".wppizza-trigger-choose",function(){e(".wppizza-open").length>0&&e(".wppizza-cart").length>0&&alert(wppizza.msg.choosesize)}),e(document).on("click",".wppizza-trigger-click",function(){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0){var a=this.id.split("-");a=a.splice(2),a=a.join("-"),target=e("#wppizza-"+a),target.trigger("click")}}),e(document).on("click","#wppizza-login,#wppizza-login-cancel",function(){e("#wppizza-user-login-action").toggle(300),e("#wppizza-user-login-option>span>a").toggle()}),e(document).on("click","#wppizza_btn_login",function(){e("#wppizza-user-login-action").append('<div id="wppizza-loading"></div>')}),e(document).on("change","#wppizza_account",function(){e("#wppizza-user-register-info").toggle(200),e(".wppizza-login-error").remove()}),e("#wppizza-send-order").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"nonce",val:"register"}},function(a){e("#wppizza-create-account").append(a)},"html").error(function(e,a,t){alert("error : "+t),console.log(e.responseText)}),e(document).on("click",".wppizza-ordernow",function(){e("#wppizza-send-order").validate().settings.ignore=""});var o=e("#wppizza-send-order #ctips"),n=o.val();o.keydown(function(a){return 13==a.which||35==a.which?(a.preventDefault(),e("#wppizza-ctips-btn").trigger("click"),!1):void 0}),e(document).on("click","#wppizza-ctips-btn",function(){e("#wppizza-send-order").validate().settings.ignore="#wppizza-send-order>fieldset>input,#wppizza-send-order>fieldset>textarea,#wppizza-send-order>fieldset>select";var a=e("#wppizza-send-order").valid();if(a){var t=e("#wppizza-send-order #ctips").val();n!=t&&(e("#wppizza-send-order").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"add_tips",data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){window.location.href=e.location},"json"))}}),e("#wppizza-login-frm").validate({}),e("#wppizza-send-order").validate({rules:{ctips:{number:!0}},invalidHandler:function(a,t){if(t.numberOfInvalids()){var i=e(t.errorList[0].element),r=e(window),p=r.scrollTop(),o=p+r.height(),n=i.offset().top,z=n+i.height(),l=o>=z&&n>=p;l||e("html, body").animate({scrollTop:i.offset().top-20},300)}},submitHandler:function(a){e(".wppizza-ordernow").attr("disabled","true");var t=!1,i=!1;if(e("input[name='wppizza-gateway']").length>0){var r=e("input[name='wppizza-gateway']");if(r.is(":radio"))var p=e("input[name='wppizza-gateway']:checked");else var p=r;t=p.hasClass("wppizzaGwAjaxSubmit"),i=p.hasClass("wppizzaGwCustom")}else{var p=e("select[name='wppizza-gateway']");t=e("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwAjaxSubmit"),i=e("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwCustom")}var o=e("#wppizza-send-order"),n=p.val(),l=e("#wppizza_profile_update").is(":checked");1==l&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"profile_update",data:o.serialize()}},function(){},"html");var c=e("#wppizza-user-login"),d=e(".wppizza-login-error");d.length>0&&d.remove();var s=e("input[type=radio][name='wppizza_account']:checked");return c.hide(),"undefined"!=typeof s&&"register"==s.val()?(o.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"new-account",data:o.serialize()}},function(r){return"undefined"!=typeof r.error?(e("#wppizza-user-register-info").append(r.error),e("#wppizza-send-order #wppizza-loading").remove(),void c.show()):void("undefined"==typeof r.error&&z(o,n,t,i,a))},"json")):void z(o,n,t,i,a)}});var z=function(a,t,i,r,p){return"undefined"==typeof wppizza.cfrm||a.hasClass("wppizza-confirm-order")?void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"checkifopen"}},function(o){return"undefined"!=typeof o.isclosed?(alert(o.isclosed),window.location.href=window.location.href,void window.location.reload(!0)):r?(window["wppizza"+t+"payment"](),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-set-userdata",data:e("#wppizza-send-order").serialize()}},function(){},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)})):"cod"==t||i?(a.prepend('<div id="wppizza-loading"></div>'),e("#wppizza-user-login").empty().remove(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"sendorder",data:a.serialize()}},function(t){e("html, body").animate({scrollTop:0},300),e("#wppizza-send-order #wppizza-loading").remove(),a.html('<div id="wppizza-order-received">'+t+"</div>")},"html").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)}),void 0):(a.prepend('<div id="wppizza-loading" style="opacity:0.8;"></div>'),void p.submit())},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)}):(e("#wppizza-user-login").empty().remove(),a.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"confirmorder",data:a.serialize(),hasClassAjax:i,hasClassCustom:r}},function(t){a.html(t),a.addClass("wppizza-confirm-order"),e("#wppizza-send-order #wppizza-loading").remove()},"html").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)}))};if(jQuery.extend(jQuery.validator.messages,{required:wppizza.validate_error.required,email:wppizza.validate_error.email,number:wppizza.validate_error.decimal}),e.validator.methods.number=function(e,a){return this.optional(a)||/^(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(e)},e(document).on("click",".wppizza-cart-button>a",function(a){a.preventDefault(),a.stopPropagation();var t=e(this).attr("disabled");if("undefined"==typeof t||t===!1){var i=jQuery(this).attr("href");return void(window.location.href=i)}}),"undefined"!=typeof wppizza.usingCache){var l=e("#wppizza-cart-nocache-attributes").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"hasCachePlugin",attributes:l}},function(a){e(".wppizza-cart-nocache").html(a.markup),r(wppizza.funcCartRefr,a.cart)},"json").complete(function(){a()}).error(function(e,a,t){alert("error : "+t),console.log(e.responseText)})}else a();e(document).on("change",".wppizza-add-to-cart-size",function(){{var a=e(this),t=e(this).attr("id"),i=t.split("-").pop(-1),r=e("#wppizza-add-to-cart-size-"+i).val();a.closest("span").find(".wppizza-add-to-cart").prop("id","wppizza-"+r)}}),e(document).on("click",".wppizza-add-to-cart-select",function(){var a=e(this),t=a.next();t.trigger("click")}),wppizzaShortcodeTotals=function(){e(".wppizza-totals").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"gettotals"}},function(a){var t=e(".wppizza-totals-currency"),i=e(".wppizza-total"),r=e(".wppizza-totals-itemcount"),p=e(".wppizza-totals-checkout-button"),o=e(".wppizza-totals-viewcart");a.items.length<=0?(t.html(a.currency),i.html(a.order_value.total_price_items.val),r.length>0&&r.html("&nbsp;"),o.length>0&&o.html("&nbsp;")):(t.html(a.currency),i.html(e(".wppizza-total-items").length>0?a.order_value.total_price_items.val:a.order_value.total.val),r.length>0&&r.html(a.itemcount),o.length>0&&o.html(a.viewcart)),p.html(a.button)},"json").error(function(a,t,i){e("#wppizza-send-order #wppizza-loading").remove(),alert("error : "+i),console.log(a.responseText)})},wppizzaShortcodeTotals(),wppizzaMiniCart=function(){var a=e("#wppizza-mini-cart"),t=e(".wppizza-cart-nocache");if(a.length>0){var i=e(window);if("undefined"!=typeof wppizza.crt.mCartPadTop){var r=wppizza.crt.mCartPadTop;if("undefined"!=typeof wppizza.crt.mCartPadElm)var p=e(""+wppizza.crt.mCartPadElm);else var p=e("body")}if(t.length>0)var o=t;else var o=e(".wppizza-cart");if("undefined"!=typeof wppizza.crt.mCartElm&&a.prependTo(""+wppizza.crt.mCartElm),"undefined"!=typeof wppizza.crt.mCartStatic)return void("undefined"!=typeof p&&p.css({"padding-top":"+="+r+"px"}));var n=!0;setTimeout(function(){c(i,a,o,r,p),n=!1},500);var z;e(window).scroll(function(){n||(clearTimeout(z),z=setTimeout(function(){c(i,a,o,r,p)},300))}),e(window).resize(function(){n||(clearTimeout(z),z=setTimeout(function(){c(i,a,o,r,p)},300))})}},wppizzaMiniCart();var c=function(e,a,t,i,r){var p=e.width();if("undefined"!=typeof wppizza.crt.mCartMaxWidth)var o=wppizza.crt.mCartMaxWidth;if("undefined"!=typeof o&&p>o||"undefined"!=typeof wppizza.isCheckout)return void(a.is(":visible")&&a.fadeOut(250));var n=e.scrollTop(),z=n+e.height(),l=t.offset().top,c=l+t.height(),d=n>=c||l>=z;d&&a.is(":hidden")&&("undefined"!=typeof r&&r.animate({"padding-top":"+="+i+"px"},250),a.fadeIn(250)),!d&&a.is(":visible")&&("undefined"!=typeof r&&r.animate({"padding-top":"-="+i+"px"},250),a.fadeOut(250))};e(document).on("click",".wppizza-totals-viewcart",function(){var a=e(".wppizza-cart");if(a.length>0){var t=e("#wppizza-mini-cart"),i=t.outerHeight(),r=t.position().top+i,p=a.offset().top-(r+10);e("html, body").animate({scrollTop:Math.round(p)},100)}})});