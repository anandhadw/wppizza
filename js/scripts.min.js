var wppizzaClickEvent="click";jQuery(document).ready(function(e){var t=function(e){if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)){var t="touchstart";return t}var n=document.createElement("div");e="on"+e;var r=e in n;if(!r){n.setAttribute(e,"return;");r=typeof n[e]=="function"}n=null;var t="click";if(!r){t="touchstart"}return t};wppizzaClickEvent=t("click");var n=function(){var t=e(".wppizza-cart-sticky");var n;var r=false;if(typeof wppizza.crt.lmtb!=="undefined"&&e("#"+wppizza.crt.lmtb+"").length>0){r=e("#"+wppizza.crt.lmtb+"");var i=0;var s=r.offset().top}var o=e(window).scrollTop()+wppizza.crt.mt;var u=[];var a=[];var f=[];var l=false;if(wppizza.crt.anim>0&&wppizza.crt.fx!=""){l=true}if(t.length>0){e.each(t,function(t,n){u[t]=e(this);u[t].wrap("<div class='wppizza-cart-wrap'></div>");a[t]=u[t].css(["backgroundColor"]);a[t]["offset-top"]=u[t].offset().top;a[t]["state"]="";a[t]["height-int"]=u[t].height();a[t]["width-int"]=u[t].width();if(r&&s>a[t]["offset-top"]+a[t]["height-int"]){a[t]["limit-bottom"]=Math.floor(s-a[t]["height-int"])}f[t]=u[t].parent();u[t].width(a[t]["width-int"]);f[t].height(a[t]["height-int"])})}var c=function(e,t,n){var i=0;if(r){var s=n.offset().top;var o=Math.floor(s-t-e["height-int"]);if(o<0){i=o}}return i};if(!l){e(window).scroll(function(){var t=e(window).scrollTop()+wppizza.crt.mt;e.each(u,function(e,n){var i=c(a[e],t,r);if(a[e]["offset-top"]>=t){u[e].removeClass("wppizza-cart-fixed").css({top:"","background-color":""+a[e]["backgroundColor"]+""})}if(a[e]["offset-top"]<t){u[e].addClass("wppizza-cart-fixed").css({top:""+(wppizza.crt.mt+i)+"px","background-color":""+wppizza.crt.bg+""})}})})}if(l){var h=true;setTimeout(function(){e.each(u,function(e,t){var n=c(a[e],o,r);if(a[e]["offset-top"]>=o){a[e]["state"]="relative"}if(a[e]["offset-top"]<o){u[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg+"",top:"0"});u[e].animate({top:""+(wppizza.crt.mt+n)+"px"},wppizza.crt.anim,""+wppizza.crt.fx+"",function(){});a[e]["state"]="fixed"}});h=false},200);e(window).scroll(function(){if(!h){var t=e(window).scrollTop()+wppizza.crt.mt;clearTimeout(n);n=setTimeout(function(){e.each(u,function(e,n){var i=c(a[e],t,r);if(a[e]["offset-top"]>=t&&a[e]["state"]!="relative"){a[e]["state"]="relative";u[e].removeClass("wppizza-cart-fixed");u[e].animate({top:""},wppizza.crt.anim,""+wppizza.crt.fx+"",function(){u[e].css({"background-color":""+a[e]["backgroundColor"]+""})})}if(a[e]["offset-top"]<t&&(a[e]["state"]!="fixed"||r)){a[e]["state"]="fixed";u[e].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg+""});u[e].animate({top:""+(wppizza.crt.mt+i)+"px"},wppizza.crt.anim,""+wppizza.crt.fx+"",function(){})}})},100)}})}};e(document).on("keyup",".wppizza-cart-incr",function(t){this.value=this.value.replace(/[^0-9]/g,"");if(t.keyCode==13){e(this).closest("li").find(".wppizza-cart-increment").trigger(""+wppizzaClickEvent+"")}});var r=function(e){if(e.length>0){for(i=0;i<e.length;i++){var t=new Function("term","return "+e[i]+"(term);");t()}}};e(document).on(""+wppizzaClickEvent+"",".wppizza-add-to-cart,.wppizza-remove-from-cart,.wppizza-cart-refresh,#wppizza-force-refresh,.wppizza-cart-increment,.wppizza-empty-cart-button",function(t){if(e(".wppizza-open").length>0){t.preventDefault();t.stopPropagation();var n=e(this);var i=n.attr("id");var s=e(".wppizza-cart-button input,.wppizza-cart-button>a,.wppizza-empty-cart-button");s.attr("disabled","true");var o=false;if(typeof wppizza.itm!=="undefined"&&typeof wppizza.itm.fbatc!=="undefined"){o=true}var u=1;if(n.hasClass("wppizza-add-to-cart")){type="add"}if(n.hasClass("wppizza-remove-from-cart")){type="remove"}if(n.hasClass("wppizza-empty-cart-button")){type="removeall";i=0}if(n.hasClass("wppizza-cart-refresh")||i=="wppizza-force-refresh"){type="refresh"}if(n.hasClass("wppizza-cart-increment")){var u=n.closest("li").find(".wppizza-cart-incr").val();if(u==0){type="remove"}else{type="increment"}}if(type!="removeall"&&type!="add"){n.fadeOut(100).fadeIn(400)}if(!o&&type=="add"){n.fadeOut(100).fadeIn(400)}if(o&&type=="add"){var a=n.html();n.fadeOut(100,function(){n.html("<div class='wppizza-item-added-feedback'>"+wppizza.itm.fbatc+"</div>").fadeIn(400).delay(wppizza.itm.fbatcms).fadeOut(400,function(){n.html(a).fadeIn(100)})})}e(".wppizza-order").prepend('<div id="wppizza-loading"></div>');jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:type,id:i,itemCount:u}},function(t){e(".wppizza-order").html(t.itemsajax);e(".wppizza-cart-button").html(t.button);e(".wppizza-cart-nocheckout").html(t.nocheckout);e(".wppizza-cart-total-items-label").html(t.order_value.total_price_items.lbl);e(".wppizza-cart-total-items-value").html(t.currency+" "+t.order_value.total_price_items.val);if(t.nocheckout==""){e(".wppizza-cart-discount-label").html(t.order_value.discount.lbl);if(t.order_value.discount.val!=""){e(".wppizza-cart-discount-value").html('<span class="wppizza-minus"></span>'+t.currency+" "+t.order_value.discount.val)}else{e(".wppizza-cart-discount-value").html(t.order_value.discount.val)}e(".wppizza-cart-delivery-charges-label").html(t.order_value.delivery_charges.lbl);if(t.order_value.delivery_charges.val!=""){e(".wppizza-cart-delivery-charges-value").html(t.currency+" "+t.order_value.delivery_charges.val)}else{e(".wppizza-cart-delivery-charges-value").html(t.order_value.delivery_charges.val)}e(".wppizza-cart-tax-label").html(t.order_value.item_tax.lbl);e(".wppizza-cart-tax-value").html(t.currency+" "+t.order_value.item_tax.val);e(".wppizza-cart-total-label").html(t.order_value.total.lbl);e(".wppizza-cart-total-value").html(t.currency+" "+t.order_value.total.val)}if(t.nocheckout!=""||t.items.length==0){e(".wppizza-cart-discount-label").html("");e(".wppizza-cart-discount-value").html("");e(".wppizza-cart-delivery-charges-label").html("");e(".wppizza-cart-delivery-charges-value").html("");e(".wppizza-cart-total-label").html("");e(".wppizza-cart-total-value").html("");e(".wppizza-cart-tax-label").html("");e(".wppizza-cart-tax-value").html("")}if(t.items.length==0){e(".wppizza-cart-total-items-label").html("");e(".wppizza-cart-total-items-value").html("")}s.removeAttr("disabled");r(wppizza.funcCartRefr)},"json").error(function(t,n,r){alert("error : "+r);console.log(t.responseText);e(".wppizza-order #wppizza-loading").remove()})}});e(document).on(""+wppizzaClickEvent+"",".wppizza-add-to-cart",function(t){if(e(".wppizza-open").length==0&&e(".wppizza-cart").length>0){alert(wppizza.msg.closed)}});e(document).on("click","#wppizza-order-pickup-sel,#wppizza-order-pickup-js",function(t){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0||e("#wppizza-send-order").length>0){var n=e(this);n.attr("disabled","true");var r=n.is(":checked");if(n.attr("id")=="wppizza-order-pickup-js"&&r==true){alert(wppizza.msg.pickup)}jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"order-pickup",value:r,data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){window.location.href=e.location},"json").error(function(e,t,n){alert("error : "+n);console.log(e.responseText)})}});e(document).on(""+wppizzaClickEvent+"",".wppizza-trigger-choose",function(t){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0){alert(wppizza.msg.choosesize)}});e(document).on(""+wppizzaClickEvent+"",".wppizza-trigger-click",function(t){if(e(".wppizza-open").length>0&&e(".wppizza-cart").length>0){var n=this.id.split("-");n=n.splice(2);n=n.join("-");target=e("#wppizza-"+n+"");target.trigger(""+wppizzaClickEvent+"")}});e(document).on(""+wppizzaClickEvent+"",".wppizza-ordernow",function(t){e("#wppizza-send-order").validate().settings.ignore=""});var s=e("#wppizza-send-order #ctips").val();e(document).on("click","#wppizza-ctips-btn",function(t){e("#wppizza-send-order").validate().settings.ignore="#wppizza-send-order>fieldset>input,#wppizza-send-order>fieldset>textarea,#wppizza-send-order>fieldset>select";var n=e("#wppizza-send-order").valid();if(n){var r=e("#wppizza-send-order #ctips").val();if(s!=r){e("#wppizza-send-order").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>');jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"add_tips",data:e("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(e){window.location.href=e.location},"json")}}});e("#wppizza-send-order").validate({rules:{ctips:{number:true}},submitHandler:function(t){var n=false;if(e("input[name='wppizza-gateway']").length>0){var r=e("input[name='wppizza-gateway']");if(r.is(":radio")){var i=e("input[name='wppizza-gateway']:checked")}else{var i=r}n=i.hasClass("wppizzaGwAjaxSubmit")}else{var i=e("select[name='wppizza-gateway']");n=e("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwAjaxSubmit")}var s=e("#wppizza-send-order");var o=i.val();var u=e("#wppizza_profile_update").is(":checked");if(u==true){jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"profile_update",data:s.serialize()}},function(e){},"html")}if(o=="cod"||n){s.prepend('<div id="wppizza-loading"></div>');jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"sendorder",data:s.serialize()}},function(t){e("#wppizza-send-order #wppizza-loading").remove();s.html('<div id="wppizza-order-received">'+t+"</div>")},"html").error(function(t,n,r){e("#wppizza-send-order #wppizza-loading").remove();alert("error : "+r);console.log(t.responseText)});return false}else{s.prepend('<div id="wppizza-loading" style="opacity:0.8;"></div>');t.submit()}}});jQuery.extend(jQuery.validator.messages,{required:wppizza.validate_error.required,email:wppizza.validate_error.email,number:wppizza.validate_error.decimal});e.validator.methods.number=function(e,t){return this.optional(t)||/^(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(e)};e(document).on(""+wppizzaClickEvent+"",".wppizza-cart-button>a",function(t){t.preventDefault();t.stopPropagation();var n=e(this).attr("disabled");if(typeof n!=="undefined"&&n!==false){}else{var r=jQuery(this).attr("href");window.location.href=r}});if(typeof wppizza.usingCache!=="undefined"){var o=e("#wppizza-cart-nocache-attributes").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"hasCachePlugin",attributes:o}},function(t){e(".wppizza-cart-nocache").html(t)},"html").complete(function(){n()}).error(function(e,t,n){alert("error : "+n);console.log(e.responseText)})}else{n()}})